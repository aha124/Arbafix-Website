datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model RepairRequest {
  id               String   @id @default(cuid())
  ticketNumber     String   @unique
  // Status values: PENDING, QUOTED, DEPOSIT_PAID, RECEIVED, IN_PROGRESS, REPAIR_COMPLETE, SHIPPED, CANCELLED
  status           String   @default("PENDING")
  deviceType       String
  issueDescription String
  commonIssues     String[]
  customerName     String
  customerEmail    String
  customerPhone    String?
  shippingAddress  String
  shippingCity     String
  shippingState    String
  shippingZip      String
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt

  // Payment fields
  quoteAmount      Int?                    // Total repair cost in cents
  depositPercent   Int?     @default(50)   // Percentage required as deposit (25, 50, 75, 100)
  depositAmount    Int?                    // Calculated: quoteAmount * depositPercent / 100
  amountPaid       Int?                    // Running total of payments received
  // Payment status values: NONE, QUOTE_SENT, DEPOSIT_PAID, PAYMENT_REQUESTED, PAID_IN_FULL
  paymentStatus    String?  @default("NONE")
  stripePaymentId  String?
  stripeSessionId  String?

  // Shipping tracking
  trackingNumber   String?
  trackingCarrier  String?
}
